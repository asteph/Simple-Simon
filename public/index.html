<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Simple Simon</title>
	<link rel="stylesheet" href="/css/simple_simon.css">
</head>
<body>
	<main>
		<h1>Simple Simon</h1>
		<div id="gamebody">
			<div id="0"class="button green"></div>
			<div id="1"class="button red"></div>
			<div id="2"class="button yellow"></div>
			<div id="3"class="button blue"></div>
		</div>
		<button id="start" type='button'>PLAY!</button>
	</main>
	<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
	<script type="text/javascript">
		
		  	"use strict";
		  	var randomSequence = [];
		  	var userSequence = [];
		  	var timeToAnswer = 5000;
		  	var arraysMatch;
			//random function gets a random button and pushes that to the array
			var getRandom = function(){
				var buttons = $('.button'); 	
				var random = Math.floor(Math.random() * 4);
				randomSequence.push(random);
			};	


			//on click,lights up the button and then fades it back out
			var blink = function(target){
				$(target).fadeTo('fast', 1, function(){
					$(target).fadeTo('fast', 0.5);
			  	});
			};

			//cycles through the randomSequence array and blinks each corresponding div
		  	var blinkArray = function(){
		  		var time = 650;
	  			var buttons = $('.button');
		  		$.each(randomSequence, function(i, buttonNumber){
		  			setTimeout(function(){
		  				blink($(buttons[buttonNumber]));
  					}, time);
	  				time += 650;
		  		});
		  	};
		  	
		  	var showSequence = function(){
		  		console.log('showing sequence');
	  			getRandom();
	  			blinkArray();
	  			console.log(timeToAnswer);
	  			setTimeout(checkArray, timeToAnswer);
		  	}
		  	//create the random sequence and keep track of the user sequence
		  	//make sure that they match
	  		$('#start').click(function(){
	  			userSequence = [];
	  			randomSequence = [];
	  			getRandom();
	  			blinkArray();
				$('.button').on('click',function() {
					blink($(this));
					userSequence.push(parseInt($(this).attr('id')));
					console.log('user length');
					console.log(userSequence.length);
					console.log('generated length');
					console.log(randomSequence.length);
					if(userSequence.length == randomSequence.length){
						console.log(userSequence);
						console.log(randomSequence);
						console.log('checking Array');
						console.log('values one by one:');
						for (var i = 0; i < userSequence.length; ++i) {
							console.log(userSequence[i]);
							console.log(randomSequence[i]);
						    if (userSequence[i] !== randomSequence[i]){
						    	arraysMatch = false;
							}else {
								arraysMatch = true;
							}
						}
						if(arraysMatch){
							userSequence = [];
							getRandom();
							blinkArray();
						}else{
							alert('Improve your memory you must.');
							$('.button').off();
						}
					}
			  	});
		  	});
		
		
	</script>
</body>
</html>